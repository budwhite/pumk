<div class="page-header">
  <h1>Posting a new ride</h1>
</div>

<div class='row'>
  <div class='span8'>
    <%= simple_form_for @ride, :html => { :class => 'form-horizontal' } do |f| %>

      <h4>Do you need help or want to help out?</h4>
      <% creator_types = ['offering to drive?', 'looking for help with drop-off or pick-up?'] %>
      <%= f.input :creator_type, 
        label: 'Are you',
        as: :radio_buttons,
        collection: creator_types,
        checked: creator_types.first %>

      <%= f.input :for_which_child,
        label: 'For which child',
        as: :select,
        collection: current_user.children.collect { |x| x[:name].capitalize },
        selected: 1 %>

      <h4 class='ride-type-question'>What kind of ride are you offering?</h4>

      <%= f.input :ride_type, collection: Ride::RIDE_TYPES, as: :radio_buttons, item_wrapper_class: 'inline', checked: Ride::RIDE_TYPES.first %>

      <% all_addresses = current_user.addresses + Address.where(user_id: 0).all %>

      <%= f.input :origin, label: 'From', as: :select, default: 1,
        collection: all_addresses.map { |a| a[:name] } %>
      <%= f.input :destination, label: 'To', as: :select, default: 0,
        collection: all_addresses.map { |a| a[:name] } %>


      <h4>What kind of schedule are you looking at?</h4>
      <div class='control-group select optional'>
        <div class='controls'>
          <%= f.select_recurring :recurring_rules, [
            IceCube::Rule.weekly.day(:monday, :tuesday, :wednesday, :thursday, :friday)
          ], allow_blank: true %>
        </div>
      </div>

      <%# f.input :time, label: 'Arriving at', wrapper: :append do%>
        <%# f.input_field :time, class: 'rideTime input-small', value: '07:55 AM' %>
        <%# content_tag :span, class: 'add-on' do %>
          <!--<i class='icon-time'></i>-->
        <%#end %>
      <%#end %>

      <%#weekdays = %w(None Monday Tuesday Wednesday Thursday Friday) %>
      <%# f.input :excluding_day, label: 'Every weekday except', as: :select, collection: weekdays, default: 'None', input_html: { class: 'input-medium' } %>

      <%# f.input :time1, label: 'Arriving at', wrapper: :append do%>
        <%# f.input_field :time1, class: 'rideTime input-small', value: '07:55 AM' %>
        <%# content_tag :span, class: 'add-on' do %>
          <!--<i class='icon-time'></i>-->
        <%#end %>
      <%#end %>

      <%= f.input :from_date, label: 'From', wrapper: :append do %>
        <%= f.input_field :from_date, class: 'rideDateFrom input-small' %>
        <%= content_tag :span, class: 'add-on' do %>
          <i class='icon-calendar'></i>
        <% end %>
      <% end %>

      <%= f.input :to_date, label: 'To', hint: 'School ends on this date', wrapper: :append do %>
        <%= f.input_field :to_date, class: 'rideDateTo input-small' %>
        <%= content_tag :span, class: 'add-on' do %>
          <i class='icon-calendar'></i>
        <% end %>
      <% end %>

      <h4 class='ride-fare-question'>How much do you want each of your little riders to contribute, per ride?</h4>

      <%= f.input :gas_money, label: '$', selected: 5,
        collection: 0..20, input_html: { class: 'input-mini' } %>
      <%= f.input :seats_total, label: 'How many seats', selected: 1,
        collection: 1..4, input_html: { class: 'input-mini' } %>
      <%= f.button :submit, 'Post Ride!', :class => 'btn btn-primary' %>

    <% end %>
  </div>

  <div class='span4'>
    <div class='alert alert-info'>
      <p class='lead'>What are Drop-off and Pick-up rides?</p>
      <small>
        You can currently schedule two kinds of rides. A morning drop-off ride is from your home to school in the morning, and an afternoon pick-up ride is from school back to your home.
      </small>
    </div>
  </div>
</div>
